<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 12 Extremely useful hacks for javascript · nilliu</title><meta name="description" content="12 Extremely useful hacks for javascript - Nil"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon-old.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="nilliu"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/2017/01/06/portfolios/" target="_self" class="nav-list-link">PORTFOLIO</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nilliu" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">12 Extremely useful hacks for javascript</h1><div class="post-info">Aug 14, 2016<a href="https://blog.jscrambler.com/12-extremely-useful-hacks-for-javascript/" target="_blank" title="https://blog.jscrambler.com/12-extremely-useful-hacks-for-javascript/" class="post-from">翻譯 · 原文地址</a></div><div class="post-content"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h6 id="1-Converting-to-boolean-using-operator"><a href="#1-Converting-to-boolean-using-operator" class="headerlink" title="1.) Converting to boolean using !! operator"></a>1.) Converting to boolean using <code>!!</code> operator</h6><p>Sometimes we need to check if some variable exists or if it has a valid value, to consider them as true value. For do this kind of validation, you can use the <code>!!</code> (Double negation operator) a simple <code>!!variable</code>, which will automatically convert any kind of data to boolean and this variable will return false only if it has some of these values: <code>0</code>, <code>null</code>, <code>&quot;&quot;</code>, <code>undefined</code> or <code>NaN</code>, otherwise it will return <code>true</code>.</p>
<p>To understand it in practice, take a look this simple example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account</span>(<span class="params">cash</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.cash = cash;</div><div class="line">    <span class="keyword">this</span>.hasMoney = !!cash;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> account = <span class="keyword">new</span> Account(<span class="number">100.50</span>);</div><div class="line"><span class="built_in">console</span>.log(account.cash); <span class="comment">// 100.50</span></div><div class="line"><span class="built_in">console</span>.log(account.hasMoney); <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> emptyAccount = <span class="keyword">new</span> Account(<span class="number">0</span>);</div><div class="line"><span class="built_in">console</span>.log(emptyAccount.cash); <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(emptyAccount.hasMoney); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<div class="tip"><br>    In this case, if an <code>account.cash</code> value is greater than zero, the <code>account.hasMoney</code> will be true.<br></div>


<a id="more"></a>
<h6 id="2-Converting-to-number-using-operator"><a href="#2-Converting-to-number-using-operator" class="headerlink" title="2.) Converting to number using + operator"></a>2.) Converting to number using <code>+</code> operator</h6><p>This magic is awesome! And it’s very simple to be done, but it only works with string numbers, otherwise it will return <code>NaN</code> (Not a Number).<br>Have a look on this example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toNumber</span>(<span class="params">strNumber</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> +strNumber;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(toNumber(<span class="string">"1234"</span>)); <span class="comment">// 1234</span></div><div class="line"><span class="built_in">console</span>.log(toNumber(<span class="string">"ACB"</span>)); <span class="comment">// NaN</span></div></pre></td></tr></table></figure>
<p>This magic will work with <code>Date</code> too and, in this case, it will return the <code>timestamp</code> number:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(+<span class="keyword">new</span> <span class="built_in">Date</span>()) <span class="comment">// 1461288164385</span></div></pre></td></tr></table></figure>
<h6 id="3-Short-circuits-conditionals"><a href="#3-Short-circuits-conditionals" class="headerlink" title="3.) Short-circuits conditionals"></a>3.) Short-circuits conditionals</h6><p>If you see a similar code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (conected) &#123;</div><div class="line">    login();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can shorten it by using the combination of a variable (which will be verified) and a function using the <code>&amp;&amp;</code> (AND operator) between both.<br>For example, the previous code can become smaller in one line:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">conected &amp;&amp; login();</div></pre></td></tr></table></figure>
<p>You can do the same to check if some attribute or function exists in the object.<br>Similar to the below code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">user &amp;&amp; user.login();</div></pre></td></tr></table></figure>
<h6 id="4-Default-values-using-operator"><a href="#4-Default-values-using-operator" class="headerlink" title="4.) Default values using || operator"></a>4.) Default values using <code>||</code> operator</h6><p>Today in ES6 there is the default argument feature. In order to simulate this feature in old browsers you can use the <code>||</code> (OR operator) by including the default value as a second parameter to be used. If the first parameter returns <code>false</code> the second one will be used as a default value.<br>See this example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name || <span class="string">"Oliver Queen"</span>;</div><div class="line">    <span class="keyword">this</span>.age = age || <span class="number">27</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> user1 = <span class="keyword">new</span> User();</div><div class="line"><span class="built_in">console</span>.log(user1.name); <span class="comment">// Oliver Queen</span></div><div class="line"><span class="built_in">console</span>.log(user1.age); <span class="comment">// 27</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> user2 = <span class="keyword">new</span> User(<span class="string">"Barry Allen"</span>, <span class="number">25</span>);</div><div class="line"><span class="built_in">console</span>.log(user2.name); <span class="comment">// Barry Allen</span></div><div class="line"><span class="built_in">console</span>.log(user2.age); <span class="comment">// 25</span></div></pre></td></tr></table></figure>
<h6 id="5-Caching-the-array-length-in-the-loop"><a href="#5-Caching-the-array-length-in-the-loop" class="headerlink" title="5.) Caching the array.length in the loop"></a>5.) Caching the <code>array.length</code> in the loop</h6><p>This tip is very simple and causes a huge impact on the performance when processing large arrays during a loop.<br>Basically, almost everybody writes this synchronous <code>for</code> to iterate an array:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</div><div class="line">    <span class="built_in">console</span>.log(array[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you work with smaller arrays – it’s fine, but if you process large arrays, this code will recalculate the size of array in every iteration of this loop and this will cause a bit of delays. To avoid it, you can cache the <code>array.length</code> in a variable to use it instead of invoking the <code>array.length</code> every time during the loop:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> length = array.length;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">    <span class="built_in">console</span>.log(array[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>or even make it smaller, just write it into this way:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, length = array.length; i &lt; length; i++) &#123;</div><div class="line">    <span class="built_in">console</span>.log(array[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="6-Detecting-properties-in-an-object"><a href="#6-Detecting-properties-in-an-object" class="headerlink" title="6.) Detecting properties in an object"></a>6.) Detecting properties in an object</h6><p>This trick is very useful when you need to check if some attribute exists and it avoids running undefined functions or attributes. If you are planning to write cross-browser code, probably you will use this technique too.<br>For example, let’s imagine that you need to write code that is compatible with the old Internet Explorer 6 and you want to use the <code>document.querySelector()</code>, to get some elements by their ids. However, in this browser this function doesn’t exist, so to check the existence of this function you can use the <code>in</code> operator</p>
<p>check this example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="string">'querySelector'</span> <span class="keyword">in</span> <span class="built_in">document</span>) &#123;</div><div class="line">    <span class="built_in">document</span>.querySelector(<span class="string">"#id"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"id"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<div class="tip"><br>    In this case, if there is no <code>querySelector</code> function in the <code>document</code> object, we can use the <code>document.getElementById()</code> as fallback.<br></div>

<h6 id="7-Getting-the-last-item-in-the-array"><a href="#7-Getting-the-last-item-in-the-array" class="headerlink" title="7.) Getting the last item in the array"></a>7.) Getting the last item in the array</h6><p>The <code>Array.prototype.slice(begin, end)</code> has the power to cut arrays when you set the <code>begin</code> and <code>end</code> arguments. But if you don’t set the <code>end</code> argument, this function will automatically set the max value for the array. I think that few people know that this function can accept negative values, and if you set a negative number as <code>begin</code> argument you will get the last elements from the array:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">-1</span>)); <span class="comment">// [6]</span></div><div class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">-2</span>)); <span class="comment">// [5,6]</span></div><div class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">-3</span>)); <span class="comment">// [4,5,6]</span></div></pre></td></tr></table></figure>
<h6 id="8-Array-truncation"><a href="#8-Array-truncation" class="headerlink" title="8.) Array truncation"></a>8.) Array truncation</h6><p>This technique can lock the array’s size, this is very useful to delete some elements of the array based on the number of elements you want to set. For example, if you have an array with 10 elements, but you want to get only the first five elements, you can truncate the array, making it smaller by setting the <code>array.length = 5</code>.</p>
<p>check this example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"><span class="built_in">console</span>.log(array.length); <span class="comment">// 6</span></div><div class="line">array.length = <span class="number">3</span>;</div><div class="line"><span class="built_in">console</span>.log(array.length); <span class="comment">// 3</span></div><div class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [1,2,3]</span></div></pre></td></tr></table></figure>
<h6 id="9-Replace-all"><a href="#9-Replace-all" class="headerlink" title="9.) Replace all"></a>9.) Replace all</h6><p>The <code>String.replace()</code> function allows using String and Regex to replace strings, natively this function only replaces the first occurrence. But you can simulate a <code>replaceAll()</code> function by using the <code>/g</code> at the end of a Regex:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> string = <span class="string">"john john"</span>;</div><div class="line"><span class="built_in">console</span>.log(string.replace(<span class="regexp">/hn/</span>, <span class="string">"ana"</span>)); <span class="comment">// "joana john"</span></div><div class="line"><span class="built_in">console</span>.log(string.replace(<span class="regexp">/hn/g</span>, <span class="string">"ana"</span>)); <span class="comment">// "joana joana"</span></div></pre></td></tr></table></figure>
<h6 id="10-Merging-arrays"><a href="#10-Merging-arrays" class="headerlink" title="10.) Merging arrays"></a>10.) Merging arrays</h6><p>If you need to merge two arrays you can use the <code>Array.concat()</code> function:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> array2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"><span class="built_in">console</span>.log(array1.concat(array2)); <span class="comment">// [1,2,3,4,5,6];</span></div></pre></td></tr></table></figure>
<p>However, this function is not the most suitable to merge large arrays because it will consume a lot of memory by creating a new array. In this case, you can use <code>Array.push.apply(arr1, arr2)</code> which instead creates a new array – it will merge the second array in the first one reducing the memory usage:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> array2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"><span class="built_in">console</span>.log(array1.push.apply(array1, array2)); <span class="comment">// [1,2,3,4,5,6];</span></div></pre></td></tr></table></figure>
<h6 id="11-Converting-NodeList-to-Arrays"><a href="#11-Converting-NodeList-to-Arrays" class="headerlink" title="11.) Converting NodeList to Arrays"></a>11.) Converting <code>NodeList</code> to <code>Arrays</code></h6><p>If you run the <code>document.querySelectorAll(&quot;p&quot;)</code> function, it will probably return an array of DOM elements, the <code>NodeList</code> object. But this object doesn’t have all array’s functions, like: <code>sort()</code>, <code>reduce()</code>, <code>map()</code>, <code>filter()</code>. In order to enable these and many other native array’s functions you need to convert NodeList into Arrays. To run this technique just use this function: <code>[].slice.call(elements)</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> elements = <span class="built_in">document</span>.querySelectorAll(<span class="string">"p"</span>); <span class="comment">// NodeList</span></div><div class="line"><span class="keyword">var</span> arrayElements = [].slice.call(elements); <span class="comment">// Now the NodeList is an array</span></div><div class="line"><span class="keyword">var</span> arrayElements = <span class="built_in">Array</span>.from(elements); <span class="comment">// This is another way of converting NodeList to Array</span></div></pre></td></tr></table></figure>
<h6 id="12-Shuffling-array’s-elements"><a href="#12-Shuffling-array’s-elements" class="headerlink" title="12.) Shuffling array’s elements"></a>12.) Shuffling array’s elements</h6><p>To shuffle the array’s elements without using any external library like Lodash, just run this magic trick:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="built_in">console</span>.log(list.sort(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">Math</span>.random() - <span class="number">0.5</span> &#125;)); <span class="comment">// [2,1,3]</span></div></pre></td></tr></table></figure>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>this article was copy from <a href="https://blog.jscrambler.com/12-extremely-useful-hacks-for-javascript/" target="_blank" rel="external">jscrambler</a><br>maybe some of people says some tips above was not a good style of coding, but I’m think this just a tips sharing, not coding style tutorials, so don’t take too much time to review the way people coding, try to dig some new fun from those code. 😁</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/08/14/lazy-instantiation/" class="prev">PREV</a><a href="/2016/08/14/swift3-swift-optionals/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'nilliu';
var disqus_identifier = '2016/08/14/12-extremely-useful-hacks-for-javascript/';
var disqus_title = '12 Extremely useful hacks for javascript';
var disqus_url = 'http://yoursite.com/2016/08/14/12-extremely-useful-hacks-for-javascript/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//nilliu.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2017 <a href="http://yoursite.com">Nil</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><!--script(async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML")--></body></html><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-97730441-1', 'auto');
  ga('send', 'pageview');

</script>
